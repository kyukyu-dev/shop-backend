# Shop 도메인 모델

## 도메인 모델 만들기
1. 듣고 배우기
2. '중요한 것'들 찾기 (개념 식별)
3. '연결 고리' 찾기 (관계 정의)
4. '것'들을 설명하기 (속성 및 기본 행위 명시)
5. 그려보기 (시각화)
6. 이야기 하고 다듬기 (반복)

## Shop 도메인
- Shop은 회원이 상품을 사고 팔수 있는 온라인 커머스 서비스이다.
- Shop은 스프링 프레임워크의 철학을 바탕으로 개발되고 운영되며 빠른 응답성과 높은 정합성을 보장하는 안정적인 서비스를 목표로 한다.
- Shop에서 활동하기 위해서는 회원으로 등록해야 한다.
  - 다만, 회원이 되기 전에도 Shop에 등록된 상품 정보를 살펴볼 수 있다.
  - 상품을 구매하기 위해서는 회원 등록을 완료하고 활동 가능한 회원이 되어야 한다.
  - 등록 시간, 등록 완료 시간, 탈퇴 시간을 저장한다.
- 원하는 회원은 자신이 가진 상품을 판매하는 판매자가 될 수 있다.
  - 회원이 최초로 판매자가 되려면 판매자 신청과 승인 과정을 거치도록 한다.
  - 승인된 판매자는 상품을 등록하고 상품을 공개 할 수 있다.
  - 공개된 상품은 회원에게 노출되고, 회원은 이 상품을 구매할 수 있다.
- 회원 중 서비스에 직접적인 개입이 가능한 특별한 회원인 운영자가 있다.
  - 운영자는 회원의 활동을 관리하고, 상품의 등록과 판매를 관리한다.
- 상품은 판매자, 운영자의 액션과 정책에 의해 여러 상태를 가질 수 있다.
  - 판매자는 상품 등록 요청을 하기 전 임시 저장이 가능하다.
  - 등록 요청된 상품은 금지어 포함, 잘못된 카테고리, 위반 정책으로 인해 반려될 수 있다.
  - 검수를 통과한 상품은 회원에게 공개되어 노출된다.
  - 판매자는 자신의 상품을 판매 중단시킬 수 있다.
  - 운영자는 정책 위반 등의 이유로 상품 판매를 중단시킬 수 있다.
  - 재고가 소진된 상품은 자동으로 품절 상태가 된다.
  - 판매자는 판매 중단한 상품을 삭제시킬 수 있다.


## 도메인 모델

---
### **회원 애그리거트**

### 회원 `Member`
_Aggregate Root_
#### 속성
- `id`: `Long`
- `email`: 이메일 - Natural ID
- `nickname`: 닉네임
- `passwordHash`: 비밀번호 해시
- `status`: `MemberStatus` 회원 상태
- `detail`: `MemberDetail` 1:1 관계
#### 행위
- `static register()`: 회원 등록: email, nickname, password, passwordEncoder
- `activate()`: 등록을 완료 시킨다
- `deactivate()`: 탈퇴한다
- `verifyPassword()`: 비밀번호를 검증한다
- `changeNickname()`
- `changePassword()`
#### 규칙
- 회원 생성후 상태는 등록 대기 상태이다
- 등록 대기 상태에서만 등록 완료를 할 수 있다
- 일정조건을 만족하면 등록 대기에서 등록 완료 상태가 된다
- 등록 완료 상태에서는 탈퇴할 수 있다
- 탈퇴하지 않은 회원만 회원 정보를 수정할 수 있다
- 회원의 비밀번호는 해시를 만들어서 저장한다

### 회원 상세 `MemberDetail`
- `id`: `Long`
- `registeredAt`: 등록 일시
- `activatedAt`: 등록 완료 일시
- `deactivatedAt`: 탈퇴 일시
#### 행위
- `static create()`: 회원등록. 현재 시간을 등록 일시로 저장한다.
- `activate()`: 등록 완료와 관련된 작업 수행. 등록 완료 일시 저장.
- `deactivate()`: 탈퇴와 관련된 작업 수정. 탈퇴 일시 저장.

### 회원 상태 `MemberStatus`
_Enum_
#### 상수
- `PENDING`: 등록 신청
- `ACTIVE`: 등록 완료
- `DEACTIVATED`: 탈퇴

### DuplicateEmailException
_Exception_

### 비밀번호 인코더 `PasswordEncoder`
_Domain Service_
#### 행위
- `encode()`: 비밀번호 암호화하기
- `matches()`: 비밀번호가 일치하는지 확인

---

### Email
_Value Object_
#### 속성
- address: 이메일 주소

---